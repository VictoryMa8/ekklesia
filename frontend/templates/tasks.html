{% extends 'base.html' %}

{% block content %}
  <div id="tasks" class="flex flex-col items-center mb-10">
    <div id="new-task" class="fieldset bg-base-200 border-base-300 rounded-box w-md border p-4 mt-10">
      <h1 class="text-2xl font-bold text-center mb-4">Create New Task</h1>
      <form id="new-task-form" method="POST" class="flex flex-col items-center gap-1">
        {% csrf_token %}
        {{ form.title }}
        {{ form.description }}
        <input class="btn btn-neutral mt-4 block" type="submit" value="Create" />
      </form>
    </div>
    <h1 class="text-center text-4xl m-10">Current Tasks</h1>
    <div id="current-tasks" class="flex flex-wrap gap-4 justify-center">
      {% if tasks %}
        {% for task in tasks %}
          <div class="card card-border bg-base-300 w-lg">
            <div class="card-body">
              <h2 class="card-title">{{ task.title }}</h2>
              <p>{{ task.description }}</p>
              <p>{{ task.created_at }}</p>
              <div class="card-actions justify-end">
                {% if task.completed %}
                  <form method="POST" action="{% url 'complete_task' uuid=task.uuid %}">
                    {% csrf_token %}
                    <input class="btn btn-disabled" type="submit" value="Mark Complete" />
                  </form>
                {% else %}
                  <form method="POST" action="{% url 'complete_task' uuid=task.uuid %}">
                    {% csrf_token %}
                    <input class="btn btn-primary" type="submit" value="Mark Complete" />
                  </form>
                {% endif %}
                <form method="POST" action="{% url 'delete_task' uuid=task.uuid %}">
                  {% csrf_token %}
                  <input class="btn btn-primary" type="submit" value="Delete" />
                </form>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <h2 class="text-2xl font-thin italic">You currently have no tasks! âœ¨ðŸ’«</h2>
      {% endif %}
    </div>
  </div>
{% endblock %}
